<div class="training-create-container">
  <h1>Edit Training</h1>
  <form [formGroup]="trainingForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="name">Training Name</label>
      <input type="text" id="name" formControlName="name" required />
    </div>
    <div class="form-group">
      <label for="description">Description</label>
      <textarea
        id="description"
        formControlName="description"
        class="form-control"
      ></textarea>
    </div>
    <div class="form-group">
      <label for="type">Type</label>
      <select id="type" formControlName="type" class="form-control" required>
        <option value="" disabled>Select type</option>
        <option *ngFor="let type of trainingTypes" [value]="type">
          {{ type }}
        </option>
      </select>
    </div>
    <div class="form-group">
      <label for="date">Date</label>
      <input
        type="date"
        id="date"
        formControlName="date"
        class="form-control"
        required
      />
    </div>
    <div class="form-group">
      <label for="start_time">Start Time</label>
      <select
        id="start_time"
        formControlName="start_time"
        class="form-control"
        required
      >
        <option value="" disabled>Select start time</option>
        <option *ngFor="let time of timeOptions" [value]="time">
          {{ time }}
        </option>
      </select>
    </div>

    <div class="form-group">
      <label for="end_time">End Time</label>
      <select
        id="end_time"
        formControlName="end_time"
        class="form-control"
        required
      >
        <option value="" disabled>Select end time</option>
        <option *ngFor="let time of timeOptions" [value]="time">
          {{ time }}
        </option>
      </select>
    </div>
    <div class="form-group">
      <label for="location">Location</label>
      <input
        type="text"
        id="location"
        formControlName="location"
        class="form-control"
        required
      />
    </div>
    <div class="form-group">
      <label for="max_participants">Max Participants</label>
      <input
        type="number"
        id="max_participants"
        formControlName="max_participants"
        class="form-control"
        required
      />
    </div>
    <div class="form-group">
      <label for="trainer">Trainer</label>
      <select
        id="trainer"
        formControlName="trainer"
        class="form-control"
        required
      >
        <option value="" disabled>Select trainer</option>
        <option
          *ngFor="let user of users"
          [value]="user.id"
          [selected]="user.id === selectedTrainer?.userId"
        >
          {{ user.firstName || 'Error in the backend' }} {{ user.lastName || 'null' }} {{ user.userId }}
        </option>
      </select>
    </div>
    <div class="form-group">
      <label for="sporters">Participants</label>
      <div
        id="sporters"
        class="checkbox-group"
        style="
          max-height: 200px;
          overflow-y: auto;
          border: 1px solid #ccc;
          padding: 10px;
        "
      >
        <input
          type="text"
          placeholder="Search participants"
          class="form-control mb-2"
          [(ngModel)]="searchQuery"
          [ngModelOptions]="{ standalone: true }"
          (ngModelChange)="filterUsers()"
        />
        <div
          *ngFor="let user of filteredUsers"
          (click)="toggleParticipant(user.id)"
          [class.selected]="selectedParticipants.includes(user.id)"
          class="participant-box"
        >
          {{ user.firstName }} {{ user.lastName }}
        </div>
      </div>
    </div>
    <button
      type="submit"
      class="btn btn-primary"
      [disabled]="!trainingForm.valid"
    >
      Edit Training
    </button>
  </form>
</div>
